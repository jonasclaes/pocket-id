"use strict";(self.webpackChunkpocket_id_docs=self.webpackChunkpocket_id_docs||[]).push([[829],{9997:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"client-examples/portainer","title":"Portainer","description":"This requires Portainers Business Edition","source":"@site/docs/client-examples/portainer.md","sourceDirName":"client-examples","slug":"/client-examples/portainer","permalink":"/client-examples/portainer","draft":false,"unlisted":false,"editUrl":"https://github.com/stonith404/pocket-id/edit/main/docs/docs/client-examples/portainer.md","tags":[],"version":"current","frontMatter":{"id":"portainer"},"sidebar":"docsSidebar","previous":{"title":"pgAdmin","permalink":"/client-examples/pgadmin"},"next":{"title":"Proxmox","permalink":"/client-examples/proxmox"}}');var r=i(4848),o=i(8453);const s={id:"portainer"},c="Portainer",l={},d=[{value:"Pocket ID Setup",id:"pocket-id-setup",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"portainer",children:"Portainer"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This requires Portainers Business Edition"})}),"\n",(0,r.jsx)(n.p,{children:"The following example variables are used, and should be replaced with your actual URLS."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"portainer.example.com (The url of your Portainer instance.)"}),"\n",(0,r.jsx)(n.li,{children:"id.example.com (The url of your Pocket ID instance.)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pocket-id-setup",children:"Pocket ID Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In Pocket-ID create a new OIDC Client, name it i.e. ",(0,r.jsx)(n.code,{children:"Portainer"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Set a logo for this OIDC Client if you would like too."}),"\n",(0,r.jsxs)(n.li,{children:["Set the callback URL to: ",(0,r.jsx)(n.code,{children:"https://portainer.example.com/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Copy the ",(0,r.jsx)(n.code,{children:"Client ID"}),", ",(0,r.jsx)(n.code,{children:"Client Secret"}),", ",(0,r.jsx)(n.code,{children:"Authorization URL"}),", ",(0,r.jsx)(n.code,{children:"Userinfo URL"}),", and ",(0,r.jsx)(n.code,{children:"Token URL"})," for use in the next steps."]}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"portainer-setup",children:"Portainer Setup"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["While initally setting up OAuth in Portainer, its recommended to keep the ",(0,r.jsx)(n.code,{children:"Hide internal authentication prompt"})," set to ",(0,r.jsx)(n.code,{children:"Off"})," incase you need a fallback login"]}),"\n",(0,r.jsxs)(n.li,{children:["This guide does ",(0,r.jsx)(n.strong,{children:"NOT"})," cover how to setup group claims in Portainer."]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open the Portainer web interface and navigate to: ",(0,r.jsx)(n.code,{children:"Settings > Authentication"})]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.code,{children:"Custom OAuth Provider"})]}),"\n",(0,r.jsxs)(n.li,{children:["Paste the ",(0,r.jsx)(n.code,{children:"Client ID"})," from Pocket ID into the ",(0,r.jsx)(n.code,{children:"Client ID"})," field in Portainer."]}),"\n",(0,r.jsxs)(n.li,{children:["Paste the ",(0,r.jsx)(n.code,{children:"Client Secret"})," from Pocket ID into the ",(0,r.jsx)(n.code,{children:"Client Secret"})," field in Portainer."]}),"\n",(0,r.jsxs)(n.li,{children:["Paste the ",(0,r.jsx)(n.code,{children:"Authorization URL"})," from Pocket ID into the ",(0,r.jsx)(n.code,{children:"Authorization URL"})," field in Portainer."]}),"\n",(0,r.jsxs)(n.li,{children:["Paste the ",(0,r.jsx)(n.code,{children:"Token URL"})," from Pocket ID into the ",(0,r.jsx)(n.code,{children:"Access token URL"})," field in Portainer."]}),"\n",(0,r.jsxs)(n.li,{children:["Paste the ",(0,r.jsx)(n.code,{children:"Userinfo URL"})," from Pocket ID into the ",(0,r.jsx)(n.code,{children:"Resource URL"})," field in Portainer."]}),"\n",(0,r.jsxs)(n.li,{children:["Set the ",(0,r.jsx)(n.code,{children:"Redirect URL"})," to ",(0,r.jsx)(n.code,{children:"https://portainer.example.com"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set the ",(0,r.jsx)(n.code,{children:"Logout URL"})," to ",(0,r.jsx)(n.code,{children:"https://portainer.example.com"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set the ",(0,r.jsx)(n.code,{children:"User identifier"})," field to ",(0,r.jsx)(n.code,{children:"preferred_username"}),". (This will use the users username vs the email)"]}),"\n",(0,r.jsxs)(n.li,{children:["Set the ",(0,r.jsx)(n.code,{children:"Scopes"})," field to: ",(0,r.jsx)(n.code,{children:"email openid profile"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"Auth Style"})," to ",(0,r.jsx)(n.code,{children:"Auto detect"})]}),"\n",(0,r.jsx)(n.li,{children:"Save the settings and test the new OAuth Login."}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var t=i(6540);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);